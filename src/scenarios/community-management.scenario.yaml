name: 'Community Management Agent - Matrix Testing'
description: 'Tests community management capabilities across different personality types and configurations'
base_scenario: 'src/scenarios/community-management.scenario.yaml'
runs_per_combination: 2

# Matrix parameters for different character personalities
matrix:
  - parameter: 'character.personality'
    values:
      - 'Professional Community Manager'
      - 'Friendly Moderator'
      - 'Technical Expert'
      - 'Engagement Specialist'
  
  - parameter: 'character.response_style'
    values:
      - 'Formal and authoritative'
      - 'Warm and approachable'
      - 'Direct and efficient'
      - 'Encouraging and supportive'
  
  - parameter: 'character.moderation_approach'
    values:
      - 'Firm and consistent'
      - 'Educational and guiding'
      - 'Balanced and fair'
      - 'Community-focused'

# Base character configuration
character:
  name: '{{character.personality}}'
  system: |
    You are a {{character.personality}} focused on community management.
    Your response style is {{character.response_style}}.
    Your moderation approach is {{character.moderation_approach}}.
    
    Core responsibilities:
    - Member engagement and onboarding
    - Content moderation and rule enforcement
    - Conflict resolution and community health
    - Growth strategies and analytics
    
    Always maintain your personality type and approach consistently.
  
  bio:
    - '{{character.personality}} with expertise in community building'
    - 'Specializes in {{character.moderation_approach}} moderation'
    - 'Uses {{character.response_style}} communication style'
  
  topics:
    - 'community management'
    - 'member engagement'
    - 'moderation and rules'
    - 'conflict resolution'
    - 'growth strategies'
  
  style:
    all:
      - '{{character.response_style}}'
      - 'Maintain {{character.personality}} identity'
      - 'Apply {{character.moderation_approach}} consistently'
    chat:
      - 'Use {{character.response_style}} in conversations'
      - 'Apply {{character.moderation_approach}} when needed'
    post:
      - 'Share insights as {{character.personality}}'
      - 'Maintain {{character.response_style}} in posts'

# Test scenarios
run:
  - name: 'Member Engagement Test'
    input: 'How can I improve member engagement in my community?'
    expected_actions: ['REPLY', 'PROVIDE_ENGAGEMENT_STRATEGIES']
    expected_tone: '{{character.response_style}}'
  
  - name: 'Moderation Scenario Test'
    input: 'A member is being disruptive in the chat. How should I handle this?'
    expected_actions: ['REPLY', 'APPLY_MODERATION_ACTION']
    expected_approach: '{{character.moderation_approach}}'
  
  - name: 'Conflict Resolution Test'
    input: 'Two members are arguing about a topic. How do I resolve this?'
    expected_actions: ['REPLY', 'MEDIATE_CONFLICT']
    expected_style: '{{character.response_style}}'
  
  - name: 'Community Growth Test'
    input: 'What strategies should I use to grow my community?'
    expected_actions: ['REPLY', 'PROVIDE_GROWTH_STRATEGIES']
    expected_expertise: '{{character.personality}}'

# Evaluation criteria
evaluation:
  personality_consistency: 'Agent maintains {{character.personality}} identity throughout all interactions'
  style_consistency: 'Response style remains {{character.response_style}} across all scenarios'
  approach_consistency: 'Moderation approach stays {{character.moderation_approach}} when relevant'
  action_appropriateness: 'Actions taken are appropriate for the {{character.personality}} type'
  community_focus: 'All responses prioritize community health and member well-being'
